<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="heemod">
<title>Tabular Input • heemod</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Tabular Input">
<meta property="og:description" content="heemod">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">heemod</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.1.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/a_introduction.html">An Introduction to `heemod`</a>
    <a class="dropdown-item" href="../articles/b_time_dependency.html">Time-varying values</a>
    <a class="dropdown-item" href="../articles/c_homogeneous.html">Simple Markov Models (Homogeneous)</a>
    <a class="dropdown-item" href="../articles/d_non_homogeneous.html">Time-varying Markov Models (Non-Homogeneous)</a>
    <a class="dropdown-item" href="../articles/e_probabilistic.html">Probabilistic Uncertainty Analysis</a>
    <a class="dropdown-item" href="../articles/f_sensitivity.html">Deterministic Sensitivity Analysis</a>
    <a class="dropdown-item" href="../articles/g_heterogeneity.html">Heterogeneity &amp; Demographic Analysis</a>
    <a class="dropdown-item" href="../articles/h_tabular.html">Tabular Input</a>
    <a class="dropdown-item" href="../articles/i_reproduction.html">Reproducing Exact Results from DMHEE</a>
    <a class="dropdown-item" href="../articles/j_survival.html">Survival models</a>
    <a class="dropdown-item" href="../articles/j_survival_2_psa.html">Survival Models Part 2 - PSA</a>
    <a class="dropdown-item" href="../articles/k_calibration.html">Calibrating `heemod` models</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/aphp/heemod/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Tabular Input</h1>
            
            <h4 data-toc-skip class="date">2024-02-07</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/aphp/heemod/blob/HEAD/vignettes/h_tabular.Rmd" class="external-link"><code>vignettes/h_tabular.Rmd</code></a></small>
      <div class="d-none name"><code>h_tabular.Rmd</code></div>
    </div>

    
    
<p>In most of the <code>heemod</code> vignettes models are defined
through <code>R</code> code. But models with large numbers of states and
transition probabilities might be unwieldy to input at the keyboard, and
could be conveniently specified by file inputs.</p>
<p>This vignette demonstrates how to make and use files to input models
to <code>heemod</code>. The files can then be used to run a suite of
analyses (including deterministic and probabilistic sensitivity
analyses, acceptability curve calculation, etc.) and optionally save
results to a folder.</p>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The inputs for state definition, transition matrices, model options,
etc. (referenced as <em>tabular inputs</em>) must be provided via
<code>csv</code>, <code>xls</code> or <code>xlsx</code> files.<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;French &lt;code&gt;csv&lt;/code&gt; (with &lt;code&gt;;&lt;/code&gt; separator)
are not supported.&lt;/p&gt;"><sup>1</sup></a> Columns
starting by <code>.comment</code> are ignored, as well as blank
rows.</p>
<p>These inputs must be provided in separate files. The path to these
files is specified in a <em>reference file</em>, that acts as an
‘umbrella’ file atop of the other inputs. The reference file default
name is <code>REFERENCE.csv</code>.</p>
<p><em>Warning for users of the <code>xls</code> format:</em><br>
The <code>xls</code> files are read with the <code>readxl</code>
package. As of version 0.1.1 if a column contains strings and numeric
values the numeric values are rounded to 6 decimal places. We therefore
recommend to use solely the <code>csv</code> or <code>xlsx</code>
format.</p>
</div>
<div class="section level2">
<h2 id="reference-file">Reference file<a class="anchor" aria-label="anchor" href="#reference-file"></a>
</h2>
<p>This file contains two mandatory columns <code>data</code> and
<code>file</code>, as well as optional columns with comments, which will
be ignored. The <code>data</code> column must contain the following
keywords:</p>
<ol style="list-style-type: decimal">
<li>
<code>state</code>: file containing model states.</li>
<li>
<code>tm</code>: file containing transition probabilities.</li>
<li>
<code>parameters</code>: file containing model parameters.</li>
</ol>
<p>Optionally, the following rows can be provided:</p>
<ol start="4" style="list-style-type: decimal">
<li>
<code>options</code>: file specifying model options.</li>
<li>
<code>demographics</code>: file describing of the population to run
the models on.</li>
<li>
<code>data</code>: a <em>directory</em> containing additional tables
to be loaded; these can be <code>.csv</code>, <code>.xls</code> or
<code>.xlsx</code>.</li>
<li>
<code>output</code>: a <em>directory</em> to save the output
graphics.<br>
</li>
<li>
<code>source</code>: a <em>directory</em> in which <code>R</code>
source files used in the analysis can be placed, and will be sourced
when the model is run. The global environment is not modified.</li>
</ol>
<table class="table">
<thead><tr class="header">
<th align="left">data</th>
<th align="left">file</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">state</td>
<td align="left">THR_states.csv</td>
</tr>
<tr class="even">
<td align="left">tm</td>
<td align="left">THR_transition_probs.csv</td>
</tr>
<tr class="odd">
<td align="left">parameters</td>
<td align="left">THR_parameters.csv</td>
</tr>
<tr class="even">
<td align="left">demographics</td>
<td align="left">THR_demographic_table.csv</td>
</tr>
<tr class="odd">
<td align="left">data</td>
<td align="left">input_dataframes</td>
</tr>
<tr class="even">
<td align="left">output</td>
<td align="left">output</td>
</tr>
<tr class="odd">
<td align="left">options</td>
<td align="left">THR_options.csv</td>
</tr>
</tbody>
</table>
<p>All the files and directories must be in the reference file
directory. Files or directories located elsewhere must be given by
absolute path and marked by a <code>TRUE</code> value in an optional
<code>absolute_path</code> column.</p>
</div>
<div class="section level2">
<h2 id="states-file">States file<a class="anchor" aria-label="anchor" href="#states-file"></a>
</h2>
<p>A state file contains 2 mandatory columns: <code>.model</code> and
<code>.state</code>, corresponding to strategy and state names
respectively. The other columns correspond to the state values.</p>
<p>Discounting rates can be specified in <code>.discount.*</code>
columns, where <code>*</code> stands for the name of the value to
discount. Values are always discounted at the same rate in all states.<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;A single discount rate can be duplicated across states,
or specified in one state and left blank elsewhere. Specifying two
different discount rates for a single variable in different states will
cause an error.&lt;/p&gt;"><sup>2</sup></a></p>
<p>Values specified for only one strategy will be carried over to
others. Only values that differ from one strategy to another must be
specified separately for each strategy.</p>
<table class="table">
<thead><tr class="header">
<th align="left">.model</th>
<th align="left">.state</th>
<th align="right">cost</th>
<th align="right">qaly</th>
<th align="left">.discount.qaly</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">standard</td>
<td align="left">PrimaryTHR</td>
<td align="right">0</td>
<td align="right">0.00</td>
<td align="left">0.015</td>
</tr>
<tr class="even">
<td align="left">standard</td>
<td align="left">SuccessfulPrimary</td>
<td align="right">0</td>
<td align="right">0.85</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">standard</td>
<td align="left">RevisionTHR</td>
<td align="right">5294</td>
<td align="right">0.30</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">standard</td>
<td align="left">SuccessfulRevision</td>
<td align="right">0</td>
<td align="right">0.75</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">standard</td>
<td align="left">Death</td>
<td align="right">0</td>
<td align="right">0.00</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">new</td>
<td align="left">PrimaryTHR</td>
<td align="right">0</td>
<td align="right">0.00</td>
<td align="left">0.015</td>
</tr>
</tbody>
</table>
<p>State values that do not change between models need only be specified
once (such as all states except <code>PrimaryTHR</code> in the
<code>new</code> model) and will automatically be repeated between
models.</p>
</div>
<div class="section level2">
<h2 id="transition-probabilities">Transition probabilities<a class="anchor" aria-label="anchor" href="#transition-probabilities"></a>
</h2>
<p>A transition probabilities file contains 4 columns:</p>
<ul>
<li>
<code>.model</code>: strategy name.</li>
<li>
<code>from</code>: initial state.</li>
<li>
<code>to</code>: end state.</li>
<li>
<code>prob</code>: transition probability from initial state to end
state.</li>
</ul>
<table class="table">
<thead><tr class="header">
<th align="left">.model</th>
<th align="left">from</th>
<th align="left">to</th>
<th align="left">prob</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">standard</td>
<td align="left">PrimaryTHR</td>
<td align="left">SuccessfulPrimary</td>
<td align="left">C</td>
</tr>
<tr class="even">
<td align="left">standard</td>
<td align="left">PrimaryTHR</td>
<td align="left">Death</td>
<td align="left">0.02</td>
</tr>
<tr class="odd">
<td align="left">standard</td>
<td align="left">SuccessfulPrimary</td>
<td align="left">SuccessfulPrimary</td>
<td align="left">C</td>
</tr>
<tr class="even">
<td align="left">standard</td>
<td align="left">SuccessfulPrimary</td>
<td align="left">RevisionTHR</td>
<td align="left">pHRFailStandard</td>
</tr>
<tr class="odd">
<td align="left">standard</td>
<td align="left">SuccessfulPrimary</td>
<td align="left">Death</td>
<td align="left">mr</td>
</tr>
<tr class="even">
<td align="left">standard</td>
<td align="left">RevisionTHR</td>
<td align="left">SuccessfulRevision</td>
<td align="left">C</td>
</tr>
<tr class="odd">
<td align="left">standard</td>
<td align="left">RevisionTHR</td>
<td align="left">Death</td>
<td align="left">0.02+mr</td>
</tr>
<tr class="even">
<td align="left">standard</td>
<td align="left">SuccessfulRevision</td>
<td align="left">SuccessfulRevision</td>
<td align="left">C</td>
</tr>
<tr class="odd">
<td align="left">standard</td>
<td align="left">SuccessfulRevision</td>
<td align="left">RevisionTHR</td>
<td align="left">0.04</td>
</tr>
<tr class="even">
<td align="left">standard</td>
<td align="left">SuccessfulRevision</td>
<td align="left">Death</td>
<td align="left">mr</td>
</tr>
<tr class="odd">
<td align="left">standard</td>
<td align="left">Death</td>
<td align="left">Death</td>
<td align="left">1</td>
</tr>
<tr class="even">
<td align="left">new</td>
<td align="left">SuccessfulPrimary</td>
<td align="left">RevisionTHR</td>
<td align="left">pHRFailNew</td>
</tr>
</tbody>
</table>
<p>A probability can be defined by any expression: a number,
<code>C</code>, a different parameter name (specified in the parameter
file), or a function call.</p>
<p>As with the state file above probabilities specified for only one
strategy will be carried over to others. Only probabilities that differ
from one strategy to another must be specified separately for each
strategy. Unspecified transition probabilities are assumed to be 0.</p>
</div>
<div class="section level2">
<h2 id="parameters">Parameters<a class="anchor" aria-label="anchor" href="#parameters"></a>
</h2>
<p>A parameter file contains 2 mandatory columns: the parameter names
<code>parameter</code> and the values <code>value</code>.</p>
<p>Optional columns can be added to perform deterministic or
probabilistic sensitivity analysis (DSA and PSA). <code>low</code> and
<code>high</code> columns specify the lower and upper bounds of
parameter values for DSA, while <code>psa</code> contains the parameter
distribution for PSA.</p>
<table class="table">
<colgroup>
<col width="11%">
<col width="55%">
<col width="8%">
<col width="8%">
<col width="15%">
</colgroup>
<thead><tr class="header">
<th align="left">parameter</th>
<th align="left">value</th>
<th align="left">low</th>
<th align="left">high</th>
<th align="left">psa</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">lngamma</td>
<td align="left">0.3740968</td>
<td align="left">0.2791966</td>
<td align="left">0.468997</td>
<td align="left">normal(0.27, 0.001)</td>
</tr>
<tr class="even">
<td align="left">gamma</td>
<td align="left">exp(lngamma)</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">constant</td>
<td align="left">-5.490935</td>
<td align="left">-5.906719</td>
<td align="left">-5.075151</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">agecoef</td>
<td align="left">-0.0367022</td>
<td align="left">-0.0471246</td>
<td align="left">-0.0262798</td>
<td align="left">normal(-0.04, 0.001)</td>
</tr>
<tr class="odd">
<td align="left">malecoef</td>
<td align="left">0.768536</td>
<td align="left">0.550404</td>
<td align="left">0.986668</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">np1</td>
<td align="left">-1.344474</td>
<td align="left">-2.109637</td>
<td align="left">-0.579311</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">rr</td>
<td align="left">exp(np1)</td>
<td align="left">0.121282</td>
<td align="left">0.5602843</td>
<td align="left">binomial(0.12, 500)</td>
</tr>
<tr class="even">
<td align="left">age_init</td>
<td align="left">60</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">age</td>
<td align="left">age_init + model_time</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">sex</td>
<td align="left">0</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">sex_str</td>
<td align="left">ifelse(sex==1, “Males”, “Females”)</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">mr</td>
<td align="left">look_up(mr_table, age = age, sex = sex_str, bin = TRUE,
value = “value”)</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">lambdaStandard</td>
<td align="left">exp(constant + agecoef * age_init + malecoef *
sex)</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">lambdaNew</td>
<td align="left">exp(constant + agecoef * age_init + malecoef * sex) *
rr</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">pHRFailStandard</td>
<td align="left">1 - exp(lambdaStandard * ((model_time-1)^gamma -
model_time^gamma))</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">pHRFailNew</td>
<td align="left">1 - exp(lambdaNew * ((model_time-1)^gamma -
model_time^gamma))</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<p>A parameter can be specified as any expression: as a number, through
a previously defined parameter, with a mathematical formula or a
function call.</p>
<p>The <code><a href="../reference/look_up.html">look_up()</a></code> function can be used to look up parameter
values in external reference tables (see section <strong>User-defined
data</strong>), if a <code>data</code> argument is given in the
reference file (as for the <code>mr</code> parameter in the above
example).</p>
</div>
<div class="section level2">
<h2 id="user-defined-data">User-defined data<a class="anchor" aria-label="anchor" href="#user-defined-data"></a>
</h2>
<p>Sometimes external data is required for an analysis
(e.g. age-specific mortality rates). A <code>data</code> row in the
reference file specifies a subdirectory containing data frames to be
loaded (saved as <code>csv</code>, <code>xls</code>, or
<code>xlsx</code> files). Multiple files can be placed here, and each
filename (without the extension) is used as the dataframe name.<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;Having multiple files with the same base name but
different extensions in the directory will cause an error.&lt;/p&gt;"><sup>3</sup></a></p>
</div>
<div class="section level2">
<h2 id="model-options">Model options<a class="anchor" aria-label="anchor" href="#model-options"></a>
</h2>
<p>Models specified by tabular input will run with defaults options. The
following options can be specified in a non-mandatory
<code>options</code> file:</p>
<ul>
<li>
<code>cost</code>, <code>effect</code>: values to be used as cost
and effect.</li>
<li>
<code>init</code> comma separated starting values.</li>
<li>
<code>method</code>: counting method.</li>
<li>
<code>base</code>: name of base model.</li>
<li>
<code>cycles</code>: run the model for how many cycles?</li>
<li>
<code>n</code>: number of resample for PSA.</li>
<li>
<code>num_core</code>: number of cluster cores.</li>
</ul>
<table class="table">
<thead><tr class="header">
<th align="left">option</th>
<th align="left">value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">cost</td>
<td align="left">cost</td>
</tr>
<tr class="even">
<td align="left">effect</td>
<td align="left">qaly</td>
</tr>
<tr class="odd">
<td align="left">method</td>
<td align="left">beginning</td>
</tr>
<tr class="even">
<td align="left">cycles</td>
<td align="left">50</td>
</tr>
<tr class="odd">
<td align="left">n</td>
<td align="left">10</td>
</tr>
<tr class="even">
<td align="left">init</td>
<td align="left">1000, 0, 0, 0, 0</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="run-the-analysis">Run the analysis<a class="anchor" aria-label="anchor" href="#run-the-analysis"></a>
</h2>
<p>The entire set of analysis specified in the tabular files can be run
by the function <code>run_model_from_tabular()</code>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run_model_tabular.html">run_model_tabular</a></span><span class="op">(</span></span>
<span>  location <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"tabular/thr"</span>, package <span class="op">=</span> <span class="st">"heemod"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Running DSA on strategy 'standard'...</span></span></code></pre>
<pre><code><span><span class="co">## Running DSA on strategy 'new'...</span></span></code></pre>
<pre><code><span><span class="co">## Resampling strategy 'standard'...</span></span>
<span><span class="co">## Resampling strategy 'standard'...</span></span></code></pre>
<pre><code><span><span class="co">## Resampling strategy 'new'...</span></span>
<span><span class="co">## Resampling strategy 'new'...</span></span></code></pre>
<pre><code><span><span class="co">## Updating strategy 'standard'...</span></span></code></pre>
<pre><code><span><span class="co">## Updating strategy 'new'...</span></span></code></pre>
<p>The results can then be interpreted as usual.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span><span class="op">$</span><span class="va">model_runs</span></span></code></pre></div>
<pre><code><span><span class="co">## 2 strategies run for 50 cycles.</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Initial state counts:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## PrimaryTHR = 1000</span></span>
<span><span class="co">## SuccessfulPrimary = 0</span></span>
<span><span class="co">## RevisionTHR = 0</span></span>
<span><span class="co">## SuccessfulRevision = 0</span></span>
<span><span class="co">## Death = 0</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Counting method: 'beginning'.</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Values:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##               cost     qaly</span></span>
<span><span class="co">## standard 304266.73 14641.51</span></span>
<span><span class="co">## new       80960.18 14685.77</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Efficiency frontier:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## new</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Differences:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##     Cost Diff. Effect Diff.      ICER     Ref.</span></span>
<span><span class="co">## new  -223.3065   0.04426563 -5044.693 standard</span></span></code></pre>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">psa</span>,</span>
<span>     type <span class="op">=</span> <span class="st">"ce"</span><span class="op">)</span></span></code></pre></div>
<p><img src="h_tabular_files/figure-html/unnamed-chunk-8-1.png" width="576" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">dsa</span>,</span>
<span>     result <span class="op">=</span> <span class="st">"cost"</span>,</span>
<span>     strategy <span class="op">=</span> <span class="st">"new"</span><span class="op">)</span></span></code></pre></div>
<p><img src="h_tabular_files/figure-html/unnamed-chunk-8-2.png" width="576" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span><span class="op">$</span><span class="va">demographics</span></span></code></pre></div>
<pre><code><span><span class="co">## An analysis re-run on 8 parameter sets.</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## * Weights distribution:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span><span class="co">## 0.00219 0.01194 0.01482 0.01489 0.01994 0.02264 </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Total weight: 0.1191407</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## * Values distribution:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##                                  Min.       1st Qu.        Median          Mean</span></span>
<span><span class="co">## standard - Cost          3.892620e+01  4.392518e+01   993.2017848   708.5801137</span></span>
<span><span class="co">## standard - Effect        4.098947e+00  4.403150e+00    13.1467098    10.0487221</span></span>
<span><span class="co">## standard - Cost Diff.               -             -             -             -</span></span>
<span><span class="co">## standard - Effect Diff.             -             -             -             -</span></span>
<span><span class="co">## standard - Icer                     -             -             -             -</span></span>
<span><span class="co">## new - Cost               1.022389e+01  1.154223e+01   279.3495600   200.4971884</span></span>
<span><span class="co">## new - Effect             4.103704e+00  4.408382e+00    13.2912790    10.1504406</span></span>
<span><span class="co">## new - Cost Diff.        -9.174158e+02 -8.167007e+02  -713.8522248  -508.0829253</span></span>
<span><span class="co">## new - Effect Diff.       4.587073e-03  5.172165e-03     0.1418194     0.1017185</span></span>
<span><span class="co">## new - Icer              -6.263848e+03 -6.256979e+03 -5032.9834879 -5471.8546606</span></span>
<span><span class="co">##                               3rd Qu.          Max.</span></span>
<span><span class="co">## standard - Cost          1139.7822107  1284.1587856</span></span>
<span><span class="co">## standard - Effect          13.8274561    14.4422790</span></span>
<span><span class="co">## standard - Cost Diff.               -             -</span></span>
<span><span class="co">## standard - Effect Diff.             -             -</span></span>
<span><span class="co">## standard - Icer                     -             -</span></span>
<span><span class="co">## new - Cost                323.0815351   366.7429773</span></span>
<span><span class="co">## new - Effect               13.9929427    14.6290526</span></span>
<span><span class="co">## new - Cost Diff.          -32.3829481   -28.7023186</span></span>
<span><span class="co">## new - Effect Diff.          0.1643751     0.1867736</span></span>
<span><span class="co">## new - Icer              -4968.9381888 -4911.9130861</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## * Combined result:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 2 strategies run for 50 cycles.</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Initial state counts:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## PrimaryTHR = 1000</span></span>
<span><span class="co">## SuccessfulPrimary = 0</span></span>
<span><span class="co">## RevisionTHR = 0</span></span>
<span><span class="co">## SuccessfulRevision = 0</span></span>
<span><span class="co">## Death = 0</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Counting method: 'beginning'.</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Values:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##              cost     qaly</span></span>
<span><span class="co">## standard 708580.1 10048.72</span></span>
<span><span class="co">## new      200497.2 10150.44</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Efficiency frontier:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## new</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Differences:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##     Cost Diff. Effect Diff.      ICER     Ref.</span></span>
<span><span class="co">## new  -508.0829    0.1017185 -4994.989 standard</span></span></code></pre>
</div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Kevin Zarca, Antoine Filipovic-Pierucci.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
